name: Python tests

on: [push, pull_request]

jobs:
    test:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v4

            - name: Setup Python
              uses: actions/setup-python@v5
              with:
                python-version: '3.11'

            - name: Install pytest
              run: pip install pytest

            - name: Install lint tools
              run: pip install ruff

            - name: Run tests
              run: python -m pytest -q

            - name: Linting
              run: ruff check .

            - name: Create package
              run: zip -r kalkulator.zip kalkulator1.py kalkulator2.py kalkulator3.py

            - name: Upload artifact
              uses: actions/upload-artifact@v4
              with:
                name: build-output
                path: kalkulator.zip